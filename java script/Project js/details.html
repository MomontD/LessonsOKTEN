<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>detailed information</title>
    <link rel="stylesheet", href="style.css">

</head>
<body>

<!--// Розмітка сторінки :-->
<!--//      mainDiv - основний контейнер в який входять інші div елементи-->
<!--//      informOfUser - виводиться інформація про юзера-->
<!--//      button - кнопка , при нажиманні відображається інформація про title з постів-->
<!--//      TitleOfPosts - безпосердньо title-->
<div class="mainDivDetailsUser">
    <div class="informOfUser"> </div>
    <div class="button">
        <button class="btn">post of current user</button>
    </div>
    <div class="titleOfPosts"> </div>
</div>

<script>

    // опис змінних та script для відображення детальної інформації про користувача
    let informOfUser = document.querySelector(".informOfUser")
    let incomingUrl = new URL(location.href)
    let id = incomingUrl.searchParams.get("id")

    fetch('https://jsonplaceholder.typicode.com/users/' + id)
        .then(inCommingUser => inCommingUser.json())
        .then( user =>
            {
                div = document.createElement("div")
                div.classList.add('Chaild')
                div.innerText =
                    `ID : ${user.id}
                             Name : ${user.name}
                             User Name : ${user.username}
                             Email : ${user.email}
                             Address : ${user.address.zipcode},${user.address.street} str , ${user.address.suite}, ${user.address.city}
                             Geo : lat ${user.address.geo.lat} , lng ${user.address.geo.lng}
                             Phone : ${user.phone}
                             Website : ${user.website}
                             Company : ${user.company.name},catchPhrase :${user.company.catchPhrase},bs :${user.company.bs}`
                informOfUser.appendChild(div)
            })

    // опис змінних та реалзація кнопки button
    let button = document.querySelector(".btn")
    let titleOfPosts = document.querySelector(".titleOfPosts")

    button.onclick = function ()
        {
            fetch("https://jsonplaceholder.typicode.com/users/" + id + "/posts")
                .then(inCommingUserPost => inCommingUserPost.json())
                .then( posts =>
                    {
                        posts.forEach( userPost =>
                        {
                            divOfTitle = document.createElement("div")
                            divOfTitle.innerText = `Title to post ${userPost.id} : ${userPost.title}`

                            buttonOfPosts = document.createElement("button")
                            buttonOfPosts.innerText = "detailed information of posts"
                            buttonOfPosts.setAttribute(
                            "onclick",`document.location="post-details.html?postId=" + ${userPost.id}`)

                            titleOfPosts.append(divOfTitle,buttonOfPosts)

                        })
                    })
        }






</script>





</body>
</html>